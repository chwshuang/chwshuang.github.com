<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="描述内容"><title>Dubbo服务主机注册时出现主机上没有的IP的解决方案 | hushuang.me</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Dubbo服务主机注册时出现主机上没有的IP的解决方案</h1><a id="logo" href="/.">hushuang.me</a><p class="description">大大的微笑Blog</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/github/"><i class="fa fa-github"> GitHub</i></a><a href="/about/"><i class="fa fa-user"> 关于我</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Dubbo服务主机注册时出现主机上没有的IP的解决方案</h1><div class="post-meta">Aug 26, 2016<span> | </span><span class="category"><a href="/categories/Dubbo/">Dubbo</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h1 id="Dubbo&#x670D;&#x52A1;&#x4E3B;&#x673A;&#x6CE8;&#x518C;&#x65F6;&#x51FA;&#x73B0;&#x4E3B;&#x673A;&#x4E0A;&#x6CA1;&#x6709;&#x7684;IP&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#Dubbo&#x670D;&#x52A1;&#x4E3B;&#x673A;&#x6CE8;&#x518C;&#x65F6;&#x51FA;&#x73B0;&#x4E3B;&#x673A;&#x4E0A;&#x6CA1;&#x6709;&#x7684;IP&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="Dubbo&#x670D;&#x52A1;&#x4E3B;&#x673A;&#x6CE8;&#x518C;&#x65F6;&#x51FA;&#x73B0;&#x4E3B;&#x673A;&#x4E0A;&#x6CA1;&#x6709;&#x7684;IP&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>Dubbo&#x670D;&#x52A1;&#x4E3B;&#x673A;&#x6CE8;&#x518C;&#x65F6;&#x51FA;&#x73B0;&#x4E3B;&#x673A;&#x4E0A;&#x6CA1;&#x6709;&#x7684;IP&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h1><h2 id="1-&#x95EE;&#x9898;"><a href="#1-&#x95EE;&#x9898;" class="headerlink" title="(1) &#x95EE;&#x9898;"></a>(1) &#x95EE;&#x9898;</h2><p>&#x521D;&#x6B21;&#x4F7F;&#x7528;dubbo&#xFF0C;&#x5728;&#x7814;&#x53D1;&#x73AF;&#x5883;&#x548C;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x6D4B;&#x8BD5;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x670D;&#x52A1;&#x4E0A;&#x7EBF;&#xFF0C;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;Dubbo&#x670D;&#x52A1;&#x7AEF;&#x542F;&#x52A8;&#x6B63;&#x5E38;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x542F;&#x52A8;&#x5931;&#x8D25;&#xFF0C;&#x5E76;&#x63D0;&#x793A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Caused by: java.lang.IllegalStateException: </div><div class="line">Failed to check the status of the service com.xxx.xxx.service.LoginService. </div><div class="line">No provider available for the service com.xxxx.xxxx.service.LoginService:3.0 </div><div class="line">from the url zookeeper://202.106.199.37:2181/com.alibaba.dubbo.registry.RegistryService?anyhost=true&amp;application=xxx&amp;application.version=3.0&amp;check=false&amp;default.timeout=5000&amp;dubbo=2.5.3&amp;interface=com.xxx.xxx.service.LoginService&amp;methods=aLogin,bPassword,userLogin,modifyPasswordLogin,validate,fVersion,xLogout,userLogout,getTest,getCode,aLogin,aToken,aUser&amp;pid=2200&amp;revision=1.0&amp;side=consumer&#xD7;tamp=1462534379328&amp;version=3.0 to the consumer 202.106.199.37 use dubbo version 2.5.3</div></pre></td></tr></table></figure>
<p>&#x610F;&#x601D;&#x662F;&#x542F;&#x52A8;&#x6D88;&#x8D39;&#x8005;&#x670D;&#x52A1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x68C0;&#x67E5;Dubbo&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x65F6;&#x5F02;&#x5E38;&#xFF0C;&#x5728;&#x6D88;&#x8D39;&#x8005;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x8BBF;&#x95EE;&#x4E0D;&#x4E86;zookeeper://202.106.199.37:2181/com.alibaba.dubbo.registr&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x3002;<br>&#x6392;&#x67E5;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#xFF1A;</p>
<blockquote>
<ol>
<li><p>202.106.199.37&#x5E76;&#x4E0D;&#x662F;&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8BBE;&#x7F6E;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x4E00;&#x4E2A;&#x83AB;&#x540D;&#x8DD1;&#x51FA;&#x6765;&#x7684;IP&#x5730;&#x5740;</p>
</li>
<li><p>zookeeper&#x7684;&#x914D;&#x7F6E;&#x662F;<dubbo:registry protocol="zookeeper" address="192.168.0.123:2181"> &#xFF0C;&#x600E;&#x4E48;&#x4F1A;&#x53D8;&#x6210;zookeeper://202.106.199.37:2181/&#x4E86;</dubbo:registry></p>
</li>
<li><p>&#x5728;DubboAdmin&#x7BA1;&#x7406;&#x63A7;&#x5236;&#x53F0;&#xFF0C;&#x53D1;&#x73B0;&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x90FD;&#x6709;&#xFF0C;&#x5C31;&#x662F;&#x751F;&#x4EA7;&#x8005;&#x7AEF;&#x63D0;&#x793A;&#x6CA1;&#x6709;&#x6D88;&#x8D39;&#x8005;&#x3002;</p>
</li>
<li><p>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x6709;VPN&#xFF0C;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x4E5F;&#x6709;VPN&#xFF0C;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x6CA1;&#x6709;&#x4E8B;&#xFF0C;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x5374;&#x51FA;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x6392;&#x9664;VPN&#x7684;&#x95EE;&#x9898;&#x3002;</p>
</li>
</ol>
</blockquote>
<h2 id="2-&#x539F;&#x56E0;"><a href="#2-&#x539F;&#x56E0;" class="headerlink" title="(2) &#x539F;&#x56E0;"></a>(2) &#x539F;&#x56E0;</h2><p>&#x901A;&#x8FC7;&#x641C;&#x7D22;&#x95EE;&#x9898;&#xFF0C;&#x53D1;&#x73B0;&#x5F88;&#x591A;&#x4EBA;&#x51FA;&#x73B0;&#x7C7B;&#x4F3C;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x662F;Dubbo&#x5728;&#x6709;VPN&#x7684;&#x673A;&#x5668;&#x4E0A;&#x9700;&#x8981;&#x7ED1;&#x5B9A;&#x4E3B;&#x673A;&#x516C;&#x7F51;IP&#xFF0C;&#x4F46;&#x662F;&#x516C;&#x7F51;IP&#x662F;&#x6620;&#x5C04;&#x8FC7;&#x6765;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x89E3;&#x51B3;&#x8DEF;&#x5F84;&#x8D70;&#x4E0D;&#x901A;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x662F;&#x8BF4;Dubbo&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;DNS&#x7684;&#x5730;&#x5740;&#xFF0C;&#x901A;&#x8FC7;&#x4FEE;&#x6539;Dubbo&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;DNS&#x914D;&#x7F6E;&#x3010;vim /etc/resolv.conf &#x3011;&#x628A;&#x670D;&#x52A1;&#x540D;&#x79F0;&#x6539;&#x5230;DNS&#x4E0A;&#x53BB;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x6211;&#x6CA1;&#x6709;&#x505A;&#x3002;&#x89C9;&#x5F97;&#x592A;&#x9EBB;&#x70E6;&#x3002;</p>
<p>&#x6700;&#x540E;&#x8FD8;&#x662F;&#x89C9;&#x5F97;&#x5E94;&#x8BE5;&#x662F;IP&#x7ED1;&#x5B9A;&#x7684;&#x4E8B;&#x3002;</p>
<h2 id="3-&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#3-&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="(3) &#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>(3) &#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><p>&#x628A;&#x7BA1;&#x7406;&#x63A7;&#x5236;&#x53F0;&#x4E2D;&#x3010;dubbo/webapps/ROOT/WEB-INF/dubbo.properties&#x3011;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x3010;dubbo.protocol.host=192.168.0.123&#x3011;&#xFF0C;&#x7136;&#x540E;&#x5728;Dubbo&#x670D;&#x52A1;&#x7AEF;spring&#x7684;dubbo&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3010;<dubbo:protocol name="dubbo" port="20885">&#x3011;&#x4E2D;&#x52A0;&#x5165;&#x3010; host=&#x201D;192.168.0.123&#x201D;&#x3011;&#xFF0C;&#x5728;Dubbo&#x6D88;&#x8D39;&#x8005;&#x7AEF;&#x52A0;&#x5165;&#x3010;<dubbo:protocol host="192.168.0.123">&#x3011;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x7136;&#x540E;&#x91CD;&#x542F;Dubbo&#x7BA1;&#x7406;&#x5458;&#x63A7;&#x5236;&#x53F0;&#x3001;&#x505C;&#x6B62;&#x6D88;&#x8D39;&#x8005;&#x7AEF;&#xFF0C;&#x505C;&#x6B62;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#xFF0C;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#xFF0C;&#x518D;&#x542F;&#x52A8;&#x6D88;&#x8D39;&#x8005;&#x7AEF;&#x3002;&#x53BB;&#x7BA1;&#x7406;&#x63A7;&#x5236;&#x53F0;&#x5237;&#x65B0;&#x770B;&#x770B;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x4E00;&#x5207;&#x90FD;&#x6B63;&#x5E38;&#x4E86;&#xFF01;</dubbo:protocol></dubbo:protocol></p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x6211;&#x4EEC;&#x7EBF;&#x4E0A;&#x76EE;&#x524D;&#x5C31;&#x4E00;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x6D88;&#x8D39;&#x8005;&#x7AEF;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;IP&#x5730;&#x5740;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x662F;&#x670D;&#x52A1;&#x5668;&#x96C6;&#x7FA4;&#xFF0C;&#x8FD9;&#x4E2A;&#x4EC5;&#x4F9B;&#x53C2;&#x8003;&#x3002;</p>
<p>192.168.0.123&#x8FD9;&#x4E2A;IP&#x5730;&#x5740;&#x662F;VPN&#x7ED9;&#x5185;&#x7F51;&#x6620;&#x5C04;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5176;&#x4ED6;IP&#x5730;&#x5740;&#x548C;&#x672C;&#x673A;&#x7684;IP&#x5730;&#x5740;&#x6CA1;&#x6709;&#x8BD5;&#x8FC7;&#x884C;&#x4E0D;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;&#x3002;</p>
</div><script type="text/javascript" src="/js/share.js?v=1.0.0" async></script><a data-url="http://chwshuang.github.io/2016/08/26/10010/" data-id="cisiwxc0l000qlh3ib3p0ruax" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Dubbo/">Dubbo</a></div><div class="post-nav"><a href="/2016/08/26/10020/" class="pre">Linux下Tomcat安装优化自启动</a><a href="/2016/08/24/10007/" class="next">Hexo在GitHub中搭建博客系统(7)万网域名解析到GitHub Pages</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://chwshuang.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Dubbo/">Dubbo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GitHub/">GitHub</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tomcat/">Tomcat</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Dubbo/" style="font-size: 15px;">Dubbo</a> <a href="/tags/Tomcat/" style="font-size: 15px;">Tomcat</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/08/26/10020/">Linux下Tomcat安装优化自启动</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/26/10010/">Dubbo服务主机注册时出现主机上没有的IP的解决方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/10007/">Hexo在GitHub中搭建博客系统(7)万网域名解析到GitHub Pages</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/10006/">Hexo在GitHub中搭建博客系统(6)异常处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/10005/">Hexo在GitHub中搭建博客系统(5)Markdown语法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/10004/">Hexo在GitHub中搭建博客系统(4)建菜单写文章</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/10003/">Hexo在GitHub中搭建博客系统(3)Hexo安装主题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/10002/">Hexo在GitHub中搭建博客系统(2)Hexo一键发布文章到GitHub</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/10001/">Hexo在GitHub中搭建博客系统(1)Hexo安装</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.guojinyun.com/" title="Jinyun 's Blog" target="_blank">Jinyun 's Blog</a><ul></ul><a href="http://liubaing.com/" title="六八ing" target="_blank">六八ing</a><ul></ul><a href="https://github.com/zhouhailong" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">hushuang.me.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>